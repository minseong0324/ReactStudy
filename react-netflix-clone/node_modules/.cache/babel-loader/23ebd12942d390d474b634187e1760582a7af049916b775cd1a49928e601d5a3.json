{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'../../api/axios';import React,{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import{useDebounce}from'../../hooks/useDebounce';// useDebounce 커스텀 훅을 불러옵니다.\nimport\"./SearchPage.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchPage(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchResults=_useState2[0],setSearchResults=_useState2[1];var useQuery=function useQuery(){return new URLSearchParams(useLocation().search);};var query=useQuery();var searchTerm=query.get(\"q\");var debouncedSearchTerm=useDebounce(searchTerm,500);// 검색어를 500ms 간격으로 디바운스 합니다.\nconsole.log('searchTerm',searchTerm);useEffect(function(){if(debouncedSearchTerm){// 디바운스된 검색어가 있을 경우\nfetchSearchMovie(debouncedSearchTerm);// 디바운스된 검색어를 이용해 영화를 검색합니다.\n}},[debouncedSearchTerm]);var fetchSearchMovie=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(searchTerm){var request;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/search/multi?include_adult=false&query=\".concat(searchTerm));case 3:request=_context.sent;console.log(request);setSearchResults(request.data.results);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(\"error\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchSearchMovie(_x){return _ref.apply(this,arguments);};}();var renderSearchResults=function renderSearchResults(){return searchResults.length>0?/*#__PURE__*/_jsx(\"section\",{className:\"search-container\",children:searchResults.map(function(movie){if(movie.backdrop_path!==null&&movie.media_type!==\"person\"){var movieImageUrl=\"https://image.tmdb.org/t/p/w500\"+movie.backdrop_path;return/*#__PURE__*/_jsx(\"div\",{className:\"movie\",children:/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return navigate(\"/\".concat(movie.id));},className:\"movie__column-poster\",children:/*#__PURE__*/_jsx(\"img\",{src:movieImageUrl,alt:\"movie\",className:\"movie__poster\"})})},movie.id);}})}):/*#__PURE__*/_jsx(\"section\",{className:\"no-results\",children:/*#__PURE__*/_jsx(\"div\",{className:\"no-results__text\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uCC3E\\uACE0\\uC790 \\uD558\\uB294 \\uAC80\\uC0C9\\uC5B4\\\"\",debouncedSearchTerm,\"\\\"\\uC5D0 \\uB9DE\\uB294 \\uC601\\uD654\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"]})})});};return renderSearchResults();}","map":{"version":3,"names":["axios","React","useEffect","useState","useLocation","useNavigate","useDebounce","jsx","_jsx","jsxs","_jsxs","SearchPage","navigate","_useState","_useState2","_slicedToArray","searchResults","setSearchResults","useQuery","URLSearchParams","search","query","searchTerm","get","debouncedSearchTerm","console","log","fetchSearchMovie","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","wrap","_callee$","_context","prev","next","concat","sent","data","results","t0","stop","_x","apply","arguments","renderSearchResults","length","className","children","map","movie","backdrop_path","media_type","movieImageUrl","onClick","id","src","alt"],"sources":["/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/src/pages/SearchPage/index.js"],"sourcesContent":["import axios from '../../api/axios';\nimport React, { useEffect, useState } from 'react'\nimport { useLocation, useNavigate } from 'react-router-dom'\nimport { useDebounce } from '../../hooks/useDebounce'; // useDebounce 커스텀 훅을 불러옵니다.\nimport \"./SearchPage.css\"\n\nexport default function SearchPage() {\n    const navigate = useNavigate();\n    const [searchResults, setSearchResults] = useState([]);\n\nconst useQuery =() => {\n    return new URLSearchParams(useLocation().search)\n}\n\nlet query = useQuery();\nconst searchTerm = query.get(\"q\")\nconst debouncedSearchTerm = useDebounce(searchTerm, 500); // 검색어를 500ms 간격으로 디바운스 합니다.\n\nconsole.log('searchTerm',searchTerm);\n\nuseEffect(() => {\n    if(debouncedSearchTerm) { // 디바운스된 검색어가 있을 경우\n        fetchSearchMovie(debouncedSearchTerm); // 디바운스된 검색어를 이용해 영화를 검색합니다.\n    }\n}, [debouncedSearchTerm]);\n\nconst fetchSearchMovie = async (searchTerm) => {\n    try {\n        const request = await axios.get(\n            `/search/multi?include_adult=false&query=${searchTerm}`\n        )\n        console.log(request);\n        setSearchResults(request.data.results);\n    } catch (error) {\n        console.log(\"error\", error)\n    }\n}\n\nconst renderSearchResults = () => {\n    return searchResults.length > 0 ? (\n        <section className=\"search-container\">\n            {searchResults.map((movie) => {\n                if(movie.backdrop_path !== null && movie.media_type !== \"person\") {\n                    const movieImageUrl = \n                    \"https://image.tmdb.org/t/p/w500\" + movie.backdrop_path\n                    return(\n                        <div className='movie' key = {movie.id}>\n                            <div onClick={() => navigate(`/${movie.id}`)} className=\"movie__column-poster\"> \n                                <img\n                                src={movieImageUrl} \n                                alt=\"movie\"\n                                className='movie__poster'\n                                />\n                            </div>\n                        </div>\n                    )\n                }\n            })}\n        </section>\n    ) : (\n        <section className='no-results'>\n            <div className='no-results__text'>\n                <p>찾고자 하는 검색어\"{debouncedSearchTerm}\"에 맞는 영화가 없습니다.</p>\n            </div>\n        </section>\n    )\n\n}\nreturn renderSearchResults();\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}