{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _regeneratorRuntime from\"/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3;import axios from'../api/axios';import React,{useEffect,useState}from'react';import requests from'../api/requests';import\"./Banner.css\";import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Banner(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isClicked=_useState4[0],setisClicked=_useState4[1];useEffect(function(){fetchData();},[]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var request,movieId,_yield$axios$get,movieDetail;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(requests.fetchNowPlaying);case 2:request=_context.sent;//여러 영화 중 영화 하나의 ID를 가져오기\nmovieId=request.data.results[Math.floor(Math.random()*request.data.results.length)].id;//특정 영화의 더 상세한 정보를 가져오기(비디오 정보도 포함)\n_context.next=6;return axios.get(\"movie/\".concat(movieId),{params:{append_to_response:\"videos\"}});case 6:_yield$axios$get=_context.sent;movieDetail=_yield$axios$get.data;setMovie(movieDetail);case 9:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();var truncate=function truncate(str,n){return(str===null||str===void 0?void 0:str.length)>n?str.substr(0,n-1)+\"...\":str;};if(!isClicked){return/*#__PURE__*/_jsxs(\"header\",{className:\"banner\",style:{backgroundImage:\"url(\\\"https://image.tmdb.org/t/p/original/\".concat(movie.backdrop_path,\"\\\")\"),backgroundPosition:\"top center\",backgroundSize:\"cover\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"banner__contents\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"banner__title\",children:movie.title||movie.name||movie.orginal_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"banner__buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"banner__button play\",onClick:function onClick(){return setisClicked(true);},children:\"Play\"}),/*#__PURE__*/_jsx(\"button\",{className:\"banner__button info\",children:\"More Imfomation\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"banner__description\",children:truncate(movie.overview,100)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"banner--fadeBottom\"})]});}else{var _movie$videos,_movie$videos$results;var videoKey=((_movie$videos=movie.videos)===null||_movie$videos===void 0?void 0:(_movie$videos$results=_movie$videos.results)===null||_movie$videos$results===void 0?void 0:_movie$videos$results.length)>0?movie.videos.results[0].key:null;if(videoKey){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(HomeContainer,{children:/*#__PURE__*/_jsx(Iframe,{width:\"640\",height:\"360\",src:\"https://www.youtube.com/embed/\".concat(videoKey,\"?controls=0&autoplay=1&loop=1&mute=1&playlist=\").concat(videoKey),title:\"YouTube video player\",frameborder:\"0\",allow:\"autoplay; fullscreen\",allowfullscreen:true})})});}else{// 여기에 비디오가 없을 경우에 대한 처리를 작성하십시오.\n}}}var Iframe=styled.iframe(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: 100%;\\n    z-index: -1;\\n    opacity: 0.65;\\n    border: none;\\n\\n    &::after {\\n        content: \\\"\\\";\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n    }\\n\"])));var Container=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    flex-direction: column;\\n    width: 100%;\\n    height: 100vh;\\n\"])));var HomeContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: 100%;\\n\"])));","map":{"version":3,"names":["axios","React","useEffect","useState","requests","styled","jsx","_jsx","jsxs","_jsxs","Banner","_useState","_useState2","_slicedToArray","movie","setMovie","_useState3","_useState4","isClicked","setisClicked","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","movieId","_yield$axios$get","movieDetail","wrap","_callee$","_context","prev","next","get","fetchNowPlaying","sent","data","results","Math","floor","random","length","id","concat","params","append_to_response","stop","apply","arguments","truncate","str","n","substr","className","style","backgroundImage","backdrop_path","backgroundPosition","backgroundSize","children","title","name","orginal_name","onClick","overview","_movie$videos","_movie$videos$results","videoKey","videos","key","Container","HomeContainer","Iframe","width","height","src","frameborder","allow","allowfullscreen","iframe","_templateObject","_taggedTemplateLiteral","div","_templateObject2","_templateObject3"],"sources":["/Users/kimminseong/Desktop/ReactStudy/react-netflix-clone/src/components/Banner.js"],"sourcesContent":["import axios from '../api/axios';\nimport React, { useEffect, useState } from 'react'\nimport requests from '../api/requests';\nimport \"./Banner.css\"\nimport styled from 'styled-components';\n\n\nexport default function Banner() {\n    const [movie, setMovie] = useState([]);\n    const [isClicked, setisClicked] = useState(false);\n\n    useEffect(() => {\n        fetchData();\n    }, []);\n\n    const fetchData = async () => {\n        //현재 상영중인 영화 정보를 가져오기(여러 영화)\n        const request = await axios.get(requests.fetchNowPlaying);\n        \n        //여러 영화 중 영화 하나의 ID를 가져오기\n        const movieId = request.data.results[\n            Math.floor(Math.random() * request.data.results.length)\n        ].id;\n\n        //특정 영화의 더 상세한 정보를 가져오기(비디오 정보도 포함)\n        const {data: movieDetail} = await axios.get(`movie/${movieId}`, {\n            params: { append_to_response: \"videos\" },\n        });\n        setMovie(movieDetail);\n    };\n\n    const truncate = (str, n) => {\n        return str?.length > n ? str.substr(0, n-1) + \"...\" : str;\n    };\n\n    if(!isClicked) {\n        return (\n            <header \n                className=\"banner\"\n                style = {{\n                    backgroundImage : `url(\"https://image.tmdb.org/t/p/original/${movie.backdrop_path}\")`,\n                    backgroundPosition: \"top center\",\n                    backgroundSize: \"cover\",\n                }}\n            >\n    \n                <div className='banner__contents'>\n                    <h1 className=\"banner__title\">\n                        {movie.title || movie.name || movie.orginal_name}\n                    </h1>\n                \n                    <div className='banner__buttons'>\n                        <button className='banner__button play' \n                        onClick={() => setisClicked(true)}>Play</button>\n                        <button className='banner__button info'>More Imfomation</button>\n                    </div>\n    \n                    <h1 className='banner__description'>{truncate(movie.overview, 100)}</h1>\n                </div>\n                <div className=\"banner--fadeBottom\" />\n            </header>\n        );\n    }  else {\n        const videoKey = movie.videos?.results?.length > 0 ? movie.videos.results[0].key : null;\n    \n        if (videoKey) {\n            return (\n                <Container>\n                    <HomeContainer>\n                        <Iframe\n                            width=\"640\"\n                            height=\"360\"\n                            src={`https://www.youtube.com/embed/${videoKey}?controls=0&autoplay=1&loop=1&mute=1&playlist=${videoKey}`}\n                            title=\"YouTube video player\"\n                            frameborder=\"0\"\n                            allow=\"autoplay; fullscreen\"\n                            allowfullscreen\n                        ></Iframe>\n                    </HomeContainer>\n                </Container>\n            );\n        } else {\n            // 여기에 비디오가 없을 경우에 대한 처리를 작성하십시오.\n        }\n    }\n}\n\nconst Iframe = styled.iframe`\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n    opacity: 0.65;\n    border: none;\n\n    &::after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    }\n`\n\nconst Container = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    width: 100%;\n    height: 100vh;\n`\n\nconst HomeContainer = styled.div`\n    width: 100%;\n    height: 100%;\n`"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}